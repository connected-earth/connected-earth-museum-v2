const questions=[{title:"Where does most of the population live today?",route:{text:"for information about this subject check this link",path:"/connected-earth-museum/slides/slide_1"},options:[{text:"Farms",correct:!1},{text:"Forests",correct:!1},{text:"Cities",correct:!0},{text:"Seas",correct:!1}]},{title:"What causes orange / red sunsets?",route:{text:"for information about this subject check this link",path:"/connected-earth-museum/slides/slide_1"},options:[{text:"The light reflection on the oceans",correct:!1},{text:"Scattering of particles in the air",correct:!0},{text:"The sun is closer to the Earth during sunsets",correct:!1},{text:"The sun is physically changing color.",correct:!1}]},{title:"What is the problem with rising temperatures?",route:{text:"for information about this subject check this link",path:"/connected-earth-museum/slides/slide_1"},options:[{text:"Warmer weather is always better",correct:!1},{text:"Rising temperatures will benefit everyone equally.",correct:!1},{text:"The Earth has never been this hot",correct:!1},{text:"Because of the alarming rate that is increasing",correct:!0}]},{title:"How to identify wild fires by satellites",route:{text:"for information about this subject check this link",path:"/connected-earth-museum/slides/slide_2"},options:[{text:"By looking at temperature changes in the surroundings",correct:!0},{text:"Satellites use infrared cameras to detect heat signatures.",correct:!1},{text:"Satellites cannot detect wildfires at night.",correct:!1},{text:"Satellites cannot detect wildfires",correct:!1}]},{title:"What can we do to combat global warming?",route:{text:"for information about this subject check this link",path:"/connected-earth-museum/slides/slide_3"},options:[{text:"There is nothing we can do",correct:!1},{text:"by reducing our carbon footprint",correct:!0},{text:"Deforestation",correct:!1},{text:"Increase meat consumption.",correct:!1}]}],FULL_LIFE=3,PROJECTILE_SPEED=5,PROJECTILE_RADIUS=5;let animationId,centralBallImage,orbitingBallImage,orbitingBallImage2,life=3,activeQuestion=0,answers=[],shakeScreen=!1;const canvas=document.getElementById("gameCanvas"),ctx=canvas.getContext("2d"),lifeContainer=document.getElementById("lifeContainer"),questionsContainer=document.getElementById("questionsContainer"),canvasSize=Math.min(.8*window.innerHeight,.8*window.innerWidth,500),isMobile=window.innerWidth<768,WIDTH=canvasSize,HEIGHT=canvasSize;canvas.width=WIDTH,canvas.height=HEIGHT;const centralBall={x:WIDTH/2,y:HEIGHT/2,radius:30,color:"blue"},orbitingBall={angle:0,angularSpeed:.01,radius:15,color:"red",x:isMobile?centralBall.x+75*Math.cos(0):centralBall.x+100*Math.cos(0),y:isMobile?centralBall.y+75*Math.sin(0):centralBall.y+100*Math.sin(0)},orbitingBall2={angle:0,angularSpeed:.01,radius:15,color:"red",x:isMobile?centralBall.x+125*Math.cos(0):centralBall.x+175*Math.cos(0),y:isMobile?centralBall.y+125*Math.sin(0):centralBall.y+175*Math.sin(0)};let projectiles=[],projectiles2=[];function init(){centralBallImage=new Image,centralBallImage.src="../../assets/images/game/earth.svg",orbitingBallImage=new Image,orbitingBallImage.src="../../assets/images/game/tornado.svg",orbitingBallImage2=new Image,orbitingBallImage2.src="../../assets/images/game/industry.svg",renderHearts(),renderQuestions(),Promise.all([new Promise((e=>{centralBallImage.onload=e})),new Promise((e=>{orbitingBallImage.onload=e})),new Promise((e=>{orbitingBallImage2.onload=e}))]).then((()=>{animate()}))}function renderHearts(){lifeContainer.innerHTML="";for(let e=0;e<3;e++){const t=document.createElement("div");t.innerHTML=`\n            <svg width="36px" height="36px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path d="M1.24264 8.24264L8 15L14.7574 8.24264C15.553 7.44699 16 6.36786 16 5.24264V5.05234C16 2.8143 14.1857 1 11.9477 1C10.7166 1 9.55233 1.55959 8.78331 2.52086L8 3.5L7.21669 2.52086C6.44767 1.55959 5.28338 1 4.05234 1C1.8143 1 0 2.8143 0 5.05234V5.24264C0 6.36786 0.44699 7.44699 1.24264 8.24264Z" fill="${e+1>life?"#000":"#f00"}" />\n            </svg>\n        `,lifeContainer.appendChild(t)}}function renderQuestions(){questionsContainer.innerHTML="",questions.forEach(((e,t)=>{const a=document.createElement("div");a.className="question "+(activeQuestion===t?"":"hidden-question"),a.innerHTML=`\n            <h2>${e.title}</h2>\n            <div class="question-content">\n                <img src="../../assets/images/game/astronaut.svg" alt="Astronaut" width="100">\n                <div class="options">\n                    ${e.options.map((e=>`\n                        <button data-question="${t}" data-correct="${e.correct}">${e.text}</button>\n                    `)).join("")}\n                </div>\n            </div>\n        `,questionsContainer.appendChild(a)})),document.querySelectorAll(".options button").forEach((e=>{e.addEventListener("click",handleAnswer)}))}function handleAnswer(e){const t=parseInt(e.target.getAttribute("data-question")),a="true"===e.target.getAttribute("data-correct"),n=questions[t],i=e.target.textContent,l=n.options.find((e=>e.text===i));if(answers.push({question:n.title,option:l}),activeQuestion+1<=questions.length&&(a||(fire(orbitingBall,projectiles,!0),fire(orbitingBall2,projectiles2),handleShakeScreen()),activeQuestion++,activeQuestion<questions.length&&document.querySelectorAll(".question").forEach(((e,t)=>{t===activeQuestion?e.classList.remove("hidden-question"):e.classList.add("hidden-question")}))),t+1===questions.length){if(!a&&life-1==0)return;window.location.href="/Paintings/Game/win.html"}}function fire(e,t,a=!1){const n=centralBall.x-e.x,i=centralBall.y-e.y,l=Math.sqrt(n*n+i*i);if(0===l)return;const r=n/l*5,o=i/l*5;a&&t.push({x:e.x,y:e.y,vx:r,vy:o})}function handleShakeScreen(){questionsContainer.classList.add("shake"),setTimeout((()=>{questionsContainer.classList.remove("shake")}),900)}function animate(){orbitingBall.angle+=orbitingBall.angularSpeed,orbitingBall.x=isMobile?centralBall.x+75*Math.cos(orbitingBall.angle):centralBall.x+100*Math.cos(orbitingBall.angle),orbitingBall.y=isMobile?centralBall.y+75*Math.sin(orbitingBall.angle):centralBall.y+100*Math.sin(orbitingBall.angle),orbitingBall2.angle+=orbitingBall2.angularSpeed,orbitingBall2.x=isMobile?centralBall.x+125*Math.cos(orbitingBall2.angle):centralBall.x+175*Math.cos(orbitingBall2.angle),orbitingBall2.y=isMobile?centralBall.y+125*Math.sin(orbitingBall2.angle):centralBall.y+175*Math.sin(orbitingBall2.angle),projectiles=projectiles.map((e=>({...e,x:e.x+e.vx,y:e.y+e.vy}))).filter((e=>{if(e.x<0||e.x>WIDTH||e.y<0||e.y>HEIGHT)return!1;const t=e.x-centralBall.x,a=e.y-centralBall.y;return!(Math.sqrt(t*t+a*a)<centralBall.radius+5&&(life--,renderHearts(),0===life&&(localStorage.setItem("gameData",JSON.stringify(answers)),window.location.href="/Paintings/Game/lose.html"),1))})),projectiles2=projectiles2.map((e=>({...e,x:e.x+e.vx,y:e.y+e.vy}))).filter((e=>{if(e.x<0||e.x>WIDTH||e.y<0||e.y>HEIGHT)return!1;const t=e.x-centralBall.x,a=e.y-centralBall.y;return!(Math.sqrt(t*t+a*a)<centralBall.radius+5&&(life--,renderHearts(),0===life&&(localStorage.setItem("gameData",JSON.stringify(answers)),window.location.href="/Paintings/Game/lose.html"),1))})),ctx.clearRect(0,0,WIDTH,HEIGHT),ctx.drawImage(centralBallImage,centralBall.x-centralBall.radius,centralBall.y-centralBall.radius,100,100),ctx.drawImage(orbitingBallImage,orbitingBall.x-orbitingBall.radius,orbitingBall.y-orbitingBall.radius,50,50),ctx.drawImage(orbitingBallImage2,orbitingBall2.x-orbitingBall2.radius,orbitingBall2.y-orbitingBall2.radius,70,70),projectiles.forEach((e=>{ctx.beginPath(),ctx.arc(e.x,e.y,5,0,2*Math.PI),ctx.fillStyle="#fff",ctx.fill(),ctx.closePath()})),projectiles2.forEach((e=>{ctx.beginPath(),ctx.arc(e.x,e.y,5,0,2*Math.PI),ctx.fillStyle="#FFFF00",ctx.fill(),ctx.closePath()})),animationId=requestAnimationFrame(animate)}init(),window.addEventListener("beforeunload",(()=>{cancelAnimationFrame(animationId)}));