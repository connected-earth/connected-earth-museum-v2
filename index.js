document.getElementById("enter-museum").addEventListener("click",(function(){window.location.href="Museum/museum.html"}));const canvasWidth=400,canvasHeight=400,svgFilePath="assets/globe-inverted.svg";let points=[],startTime=Date.now(),colors=[];const colorPalette=["#4285f4","#34A853","#FBBC05","#EA4335"];function hexToRgb(t){return t=t.replace("#",""),{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16)}}function generateColors(t){for(let e=0;e<t;e++){const t=Math.floor(Math.random()*colorPalette.length);colors.push(colorPalette[t])}}async function loadSVG(t){try{const e=await fetch(t);if(!e.ok)throw new Error("Failed to load SVG file");const o=await e.text();points=extractPathsFromSVG(o),generateColors(points.length),drawPoints()}catch(t){console.error("Error loading SVG:",t)}}function extractPathsFromSVG(t){const e=(new DOMParser).parseFromString(t,"image/svg+xml"),o=e.querySelectorAll("path");let n,s,a=[],i=e.documentElement.getAttribute("viewBox");if(i){const[t,e,o,a]=i.split(" ").map(Number);n=o,s=a}else n=400,s=400;return o.forEach((t=>{const e=t.getAttribute("d");e&&a.push(...parseSVGPath(e))})),a=scalePoints(a,n,s),a}function scalePoints(t,e,o){const n=Math.min(...t.map((t=>t.x))),s=Math.min(...t.map((t=>t.y))),a=Math.max(...t.map((t=>t.x))),i=Math.max(...t.map((t=>t.y))),r=400/(a-n),l=400/(i-s),c=Math.min(r,l);return t.map((t=>({x:(t.x-n)*c+20,y:(t.y-s)*c+20})))}function cubicBezier(t,e,o,n,s){return{x:Math.pow(1-s,3)*t.x+3*Math.pow(1-s,2)*s*e.x+3*(1-s)*Math.pow(s,2)*o.x+Math.pow(s,3)*n.x,y:Math.pow(1-s,3)*t.y+3*Math.pow(1-s,2)*s*e.y+3*(1-s)*Math.pow(s,2)*o.y+Math.pow(s,3)*n.y}}function parseSVGPath(t){const e=t.match(/[MLCZmlcz][-0-9.,\s]+/g)||[];let o=[],n=0,s=0;return e.forEach((t=>{const e=t.charAt(0),a=t.slice(1).trim().split(/[\s,]+/).map(Number);if("M"===e||"L"===e)for(let t=0;t<a.length;t+=2)n=a[t],s=a[t+1],o.push({x:n,y:s});else if("m"===e||"l"===e)for(let t=0;t<a.length;t+=2)n+=a[t],s+=a[t+1],o.push({x:n,y:s});else if("C"===e)for(let t=0;t<a.length;t+=6){const[e,i,r,l,c,h]=a.slice(t,t+6);for(let t=0;t<=1;t+=.1){const a=cubicBezier({x:n,y:s},{x:e,y:i},{x:r,y:l},{x:c,y:h},t);o.push(a)}n=c,s=h}else if("c"===e)for(let t=0;t<a.length;t+=6){const[e,i,r,l,c,h]=a.slice(t,t+6),u=n+e,m=s+i,p=n+r,g=s+l,x=n+c,y=s+h;for(let t=0;t<=1;t+=.3){const e=cubicBezier({x:n,y:s},{x:u,y:m},{x:p,y:g},{x,y},t);o.push(e)}n=x,s=y}else"Z"!==e&&"z"!==e||o.length})),o}let mouseX=0,mouseY=0;const repulsionRadius=50,repulsionStrength=20;function drawPoints(){const t=document.getElementById("canvas"),e=t.getContext("2d");t.width=450,t.height=450;const o=(Date.now()-startTime)/1e3;e.clearRect(0,0,t.width,t.height);for(let t=0;t<points.length-1;t++){const n=colors[t];e.fillStyle=n;const s=points[t];let a=5*Math.sin(o+.1*s.x),i=5*Math.cos(o+.1*s.y),r=s.x-mouseX,l=s.y-mouseY,c=Math.sqrt(r*r+l*l);if(c<repulsionRadius&&c>0){let t=(repulsionRadius-c)/repulsionRadius;a+=r/c*t*repulsionStrength,i+=l/c*t*repulsionStrength}e.beginPath(),e.arc(s.x+a,s.y+i,2,0,2*Math.PI),e.fill(),e.strokeStyle=n,e.lineWidth=.5;const h=points[t+1],u=5*Math.sin(o+.1*h.x),m=5*Math.cos(o+.1*h.y);e.beginPath(),e.moveTo(s.x+a,s.y+i),e.lineTo(h.x+u,h.y+m),e.stroke();const{r:p,g,b:x}=hexToRgb(n),y=`rgba(${p}, ${g}, ${x}, 0.2)`,f=3,d=5;for(let n=f;n<=d;n++)if(t-n>=0){let r=points[t-n];const l=5*Math.sin(o+.1*r.x),c=5*Math.cos(o+.1*r.y);e.strokeStyle=y,e.beginPath(),e.moveTo(s.x+a,s.y+i),e.lineTo(r.x+l,r.y+c),e.stroke()}for(let n=f;n<=d;n++)if(t+n<points.length){let r=points[t+n];const l=5*Math.sin(o+.1*r.x),c=5*Math.cos(o+.1*r.y);e.strokeStyle=y,e.beginPath(),e.moveTo(s.x+a,s.y+i),e.lineTo(r.x+l,r.y+c),e.stroke()}}requestAnimationFrame(drawPoints)}function createLetterSpans(t){const e=document.getElementById("hoverText");e.innerHTML="";let o=0;t.split("").forEach((t=>{const n=document.createElement("span");n.textContent=t,n.style.animationDelay=.1*o+"s",e.appendChild(n),o+=1}))}document.addEventListener("mousemove",(t=>{const e=canvas.getBoundingClientRect();mouseX=t.clientX-e.left,mouseY=t.clientY-e.top})),createLetterSpans("CONNECTED   EARTH"),loadSVG(svgFilePath);